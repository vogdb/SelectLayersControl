L.Control.SelectLayers=L.Control.ActiveLayers.extend({_initLayout:function(){var e="leaflet-control-layers",t=this._container=L.DomUtil.create("div",e);L.DomEvent.disableClickPropagation(t),L.Browser.touch?L.DomEvent.on(t,"click",L.DomEvent.stopPropagation):L.DomEvent.on(t,"mousewheel",L.DomEvent.stopPropagation);var a=this._form=L.DomUtil.create("form",e+"-list");if(this.options.collapsed){var s=this._layersLink=L.DomUtil.create("a",e+"-toggle",t);s.href="#",s.title="Layers",L.Browser.touch?L.DomEvent.on(s,"click",L.DomEvent.stopPropagation).on(s,"click",L.DomEvent.preventDefault).on(s,"click",this._expand,this):(L.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this),L.DomEvent.on(s,"focus",this._expand,this)),this._map.on("movestart",this._collapse,this)}else this._expand();this._baseLayersList=L.DomUtil.create("select",e+"-base",a),L.DomEvent.on(this._baseLayersList,"change",this._onBaseLayerOptionChange,this),this._separator=L.DomUtil.create("div",e+"-separator",a),this._overlaysList=L.DomUtil.create("select",e+"-overlays",a),this._overlaysList.setAttribute("multiple",!0),this._overlaysList.style.width="100%",L.DomEvent.on(this._overlaysList,"change",this._onOverlayLayerOptionChange,this),t.appendChild(a)},_onBaseLayerOptionChange:function(){var e=this._baseLayersList.selectedIndex,t=this._baseLayersList.options[e],a=this._layers[t.layerId];this._changeBaseLayer(a)},_changeBaseLayer:function(e){this._handlingClick=!0,this._map.addLayer(e.layer),this._map.removeLayer(this._activeBaseLayer.layer),this._map.setZoom(this._map.getZoom()),this._map.fire("baselayerchange",{layer:e.layer}),this._activeBaseLayer=e,this._handlingClick=!1},_onOverlayLayerOptionChange:function(e){this._handlingClick=!0;for(var t=this._overlaysList.options,a=0;a<t.length;a++){var s=t[a],i=this._layers[s.layerId].layer;s.selected?this._map.hasLayer(i)||this._map.addLayer(i):this._map.hasLayer(i)&&this._map.removeLayer(i)}this._handlingClick=!1},_addItem:function(e){var t=this._createOptionElement(e);e.overlay?this._overlaysList.appendChild(t):this._baseLayersList.appendChild(t)},_createOptionElement:function(e){var t=document.createElement("option");return t.layerId=L.stamp(e.layer),t.innerHTML=e.name,this._map.hasLayer(e.layer)&&t.setAttribute("selected",!0),t},_collapse:function(e){e.target===this._container&&L.Control.Layers.prototype._collapse.apply(this,arguments)}}),L.control.selectLayers=function(e,t,a){return new L.Control.SelectLayers(e,t,a)};